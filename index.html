<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galeria de Fotos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Cabe√ßalho -->
  <header class="relative w-full h-56 sm:h-64 md:h-80 overflow-hidden">
    <img src="fotos/Maria-8-anos-002.jpg" alt="Capa" class="w-full h-full object-cover"/>
    <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center px-4">
      <h1 class="text-white text-2xl sm:text-3xl md:text-5xl font-bold text-center">Maria 8 anos</h1>
    </div>
  </header>

  <!-- Bot√£o baixar todas -->
  <div class="container mx-auto px-4 py-6 text-center">
    <button onclick="downloadAll()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
      üì• Baixar Todas as Fotos
    </button>
  </div>

  <!-- Galeria -->
  <main class="container mx-auto px-4 pb-10">
    <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
  </main>

  <!-- Lightbox -->
  <div id="lightbox" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-2">
    <button onclick="closeLightbox()" class="absolute top-2 md:top-5 right-2 md:right-5 text-white text-2xl md:text-3xl font-bold">√ó</button>
    <button onclick="prevImage()" class="absolute left-2 md:left-5 text-white text-3xl md:text-4xl font-bold">‚ùÆ</button>
    <img id="lightbox-img" src="" alt="Foto em alta resolu√ß√£o" class="max-w-full max-h-full rounded-lg shadow-lg object-contain"/>
    <button onclick="nextImage()" class="absolute right-2 md:right-5 text-white text-3xl md:text-4xl font-bold">‚ùØ</button>
  </div>

  <script>
    const images = [
      { thumb: "fotos/Maria-8-anos-001.jpg", full: "fotos/Maria-8-anos-001.jpg", name: "Maria-8-anos-001.jpg" },
      { thumb: "fotos/Maria-8-anos-002.jpg", full: "fotos/Maria-8-anos-002.jpg", name: "Maria-8-anos-002.jpg" },
      { thumb: "fotos/Maria-8-anos-003.jpg", full: "fotos/Maria-8-anos-003.jpg", name: "Maria-8-anos-003.jpg" },
      { thumb: "fotos/Maria-8-anos-004.jpg", full: "fotos/Maria-8-anos-004.jpg", name: "Maria-8-anos-004.jpg" },
      { thumb: "fotos/Maria-8-anos-005.jpg", full: "fotos/Maria-8-anos-005.jpg", name: "Maria-8-anos-005.jpg" },
      { thumb: "fotos/Maria-8-anos-006.jpg", full: "fotos/Maria-8-anos-006.jpg", name: "Maria-8-anos-006.jpg" }
    ];

    const gallery = document.getElementById("gallery");
    let currentIndex = 0;

    // Criar galeria
    images.forEach((img, i) => {
      const div = document.createElement("div");
      div.className = "relative group border rounded-lg overflow-hidden shadow cursor-pointer";

      div.innerHTML = `
        <img src="${img.thumb}" alt="Foto ${i+1}" 
             class="w-full h-48 sm:h-56 md:h-60 object-cover group-hover:scale-105 transition-transform duration-300"/>
        <div class="absolute bottom-2 right-2">
          <button onclick="event.stopPropagation(); downloadImage('${img.full}', '${img.name}')" 
             class="bg-white text-blue-600 px-3 py-1 text-xs sm:text-sm rounded shadow hover:bg-gray-100">
             Baixar
          </button>
        </div>
      `;

      div.addEventListener("click", () => openLightbox(i));
      gallery.appendChild(div);
    });

    // Abrir lightbox
    function openLightbox(index) {
      currentIndex = index;
      document.getElementById("lightbox-img").src = images[currentIndex].full;
      document.getElementById("lightbox").classList.remove("hidden");
    }

    function closeLightbox() {
      document.getElementById("lightbox").classList.add("hidden");
      document.getElementById("lightbox-img").src = "";
    }

    function prevImage() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      document.getElementById("lightbox-img").src = images[currentIndex].full;
    }

    function nextImage() {
      currentIndex = (currentIndex + 1) % images.length;
      document.getElementById("lightbox-img").src = images[currentIndex].full;
    }

    function downloadImage(url, filename) {
      fetch(url)
        .then(res => res.blob())
        .then(blob => {
          saveAs(blob, filename);
        });
    }

    async function downloadAll() {
      const zip = new JSZip();
      const folder = zip.folder("galeria");

      for (let i = 0; i < images.length; i++) {
        const response = await fetch(images[i].full);
        const blob = await response.blob();
        folder.file(images[i].name, blob);
      }

      const content = await zip.generateAsync({ type: "blob" });
      saveAs(content, "Maria-8-anos.zip");
    }
  </script>

</body>
</html>
